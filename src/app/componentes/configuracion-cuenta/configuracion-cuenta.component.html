<app-barralateral></app-barralateral>
<div class="container">
  <div class="jumbotron">
    <p-messages [(value)]="msgs"></p-messages>

    <div class="row" *ngIf="!cargando">
      <div class="col-sm-4">
        <h2 class="text-center"> Â¡Cambia tu imagen de perfil!</h2>
        <img  class="img-thumbnail" width="304" height="200" [src]="foto">
        <!--<p-fileUpload mode="basic" name="foto" url="http://localhost/backendTp2/index.php/ingreso/subirFoto" (onBeforeSend)="arreglar($event)" (onUpload)="subirFoto($event)"></p-fileUpload>-->
        <p-fileUpload mode="basic" name="foto" url="https://remiseriagustavopetruzzi.000webhostapp.com/index.php/ingreso/subirFoto" (onBeforeSend)="arreglar($event)" (onUpload)="subirFoto($event)"></p-fileUpload>
      </div>

      <div class="col-sm">
        <h2 class="text-center"> Modifica tu cuenta </h2>
        <form [formGroup]="modificaDatosForm" class="text-center">
          <div class="row">
            <div class="col">
              <div class="form-group">
                <label class="center-block">Nombre
                  <input class="form-control" formControlName="nombre">
                  <div [hidden]="!this.modificaDatosForm.controls['nombre'].invalid || this.modificaDatosForm.controls['nombre'].pristine" class="alert alert-danger">
                    <div [hidden]="!this.modificaDatosForm.controls['nombre'].hasError('required')"> El nombre es requerido </div>
                  </div>
                </label>
              </div>

              <div class="form-group">
                <label class="center-block">Apellido
                  <input class="form-control" formControlName="apellido">
                  <div [hidden]="!this.modificaDatosForm.controls['apellido'].invalid || this.modificaDatosForm.controls['apellido'].pristine" class="alert alert-danger">
                    <div [hidden]="!this.modificaDatosForm.controls['apellido'].hasError('required')">El apellido es requerido</div>
                  </div>
                </label>
              </div>
            </div>
            
            <div class="col">
              <div class="form-group">
                <label class="center-block"> Usuario
                  <input class="form-control" formControlName="usuario">
                  <div [hidden]="!this.modificaDatosForm.controls['usuario'].invalid || this.modificaDatosForm.controls['usuario'].pristine" class="alert alert-danger">
                    <div [hidden]="!this.modificaDatosForm.controls['usuario'].hasError('required')"> El usuario es requerido</div>
                  </div>
                </label>
              </div>
              
              <div class="form-group">
                <label class="center-block"> Nuevo Password
                  <input class="form-control" formControlName="nuevoPassword" type="password">
                  <div [hidden]="!this.modificaDatosForm.controls['nuevoPassword'].invalid || this.modificaDatosForm.controls['nuevoPassword'].pristine" class="alert alert-danger">
                    <div [hidden]="!this.modificaDatosForm.controls['nuevoPassword'].hasError('required')"> el Password es requerido </div>
                  </div>
                </label>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label class="center-block"> Password Actual
              <input class="form-control" formControlName="password" type="password">
              <div [hidden]="!this.modificaDatosForm.controls['password'].invalid || this.modificaDatosForm.controls['password'].pristine" class="alert alert-danger">
                <div [hidden]="!this.modificaDatosForm.controls['password'].hasError('required')"> El nuevo password es requerido </div>
              </div>
            </label>
          </div>

          <i [hidden]="!modificando" class="pi pi-spin pi-spinner" style="font-size: 3em"></i>
          <button class="btn btn-primary btn-block" [hidden]="modificando" [disabled]="!this.modificaDatosForm.valid" (click)="modificar()"> Modificar </button>
        </form>
      </div>
    </div>

    <div class="row" *ngIf="cargando" >
      <div class="col-sm-4 offset-sm-4">
        <div class="lds-css ng-scope">
          <div class="lds-blocks" style="100%;height:100%"><div style="left:38px;top:38px;animation-delay:0s"></div>
          <div style="left:80px;top:38px;animation-delay:0.125s"></div>
          <div style="left:122px;top:38px;animation-delay:0.25s"></div>
          <div style="left:38px;top:80px;animation-delay:0.875s"></div>
          <div style="left:122px;top:80px;animation-delay:0.375s"></div>
          <div style="left:38px;top:122px;animation-delay:0.75s"></div>
          <div style="left:80px;top:122px;animation-delay:0.625s"></div>
          <div style="left:122px;top:122px;animation-delay:0.5s"></div>
        </div>
        <style type="text/css">
        
        @keyframes lds-blocks {
          0% {
            background: #72cbfd;
          }
          12.5% {
            background: #72cbfd;
          }
          12.625% {
            background: #0b1d27;
          }
          100% {
            background: #0b1d27;
          }
        }
        @-webkit-keyframes lds-blocks {
          0% {
            background: #72cbfd;
          }
          12.5% {
            background: #72cbfd;
          }
          12.625% {
            background: #0b1d27;
          }
          100% {
            background: #0b1d27;
          }
        }
        .lds-blocks {
          position: relative;
        }
        .lds-blocks div {
          position: absolute;
          width: 40px;
          height: 40px;
          background: #0b1d27;
          -webkit-animation: lds-blocks 1s linear infinite;
          animation: lds-blocks 1s linear infinite;
        }
        .lds-blocks {
          width: 200px !important;
          height: 200px !important;
          -webkit-transform: translate(-100px, -100px) scale(1) translate(100px, 100px);
          transform: translate(-100px, -100px) scale(1) translate(100px, 100px);
        }
        </style>
      </div>
    </div>
  </div>
</div>